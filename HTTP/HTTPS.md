# HTTPS

在 HTTPS 之前， HTTP 都是使用明文进行数据传输， 在网络环境中数据很容易被第三方劫持，从而导致数据泄露，或者信息被篡改。因此在 HTTP 的基础之上加了一层安全层。安全层的主要功能就是对所有经过安全层的数据进行加密和解密。

<img src="./img/httpvshttps.png" />

## 常用的加解密方式

**对称加密**

所谓对称加密是指加密和解密都使用的是相同的密钥。对称加密缺点是效率太低，且容易被黑客获取到密钥。

**非对称加密**

非对称加密算法有 A、B 两把密钥, 分别是公钥和私钥， 公钥是每个人都能获得的，访问 HTTPS 的域名网站是， 服务器会以明文的方式发送给浏览器；而私钥只能由服务器拥有。加密时，若是用公钥加密的秘文，就需要用私钥解密；若是用私钥加密的秘文，则只能用公钥解密。非对称加密的缺点是由于黑客也可以拿到公钥因而无法保证服务器的安全。

**非对称加密和对称加密配合使用**

在传输数据阶段依然使用对称加密，但是对称加密的密钥我们采用非对称加密来传输。不过这种方法也有缺陷。黑客通过 DNS 劫持模仿网站也可以诱导用户泄露账号和密码。

> DNS 劫持： 将目标访问 IP, 篡改成黑客的服务 IP, 然后访问到黑客模仿好的网站。

因此为了让用户识别当前浏览网站是否为官网，在非对称加密和对称加密的配合使用基础上给网站加上数字证书。

**数字证书**

对浏览器来说数字证书的作用， 一是向浏览器证明服务器身份， 二是将包含在证书里面的公钥发送给浏览器。

**如何申请数字证书**

- 首先极客时间需要准备一套私钥和公钥，私钥留着自己使用；

- 然后极客时间向 CA 机构提交公钥、公司、站点等信息并等待认证，这个认证过程可能是收费的；

- CA 通过线上、线下等多种渠道来验证极客时间所提供信息的真实性，如公司是否存在、企业是否合法、域名是否归属该企业等；

- 如信息审核通过，CA 会向极客时间签发认证的数字证书，包含了极客时间的公钥、组织信息、CA 的信息、有效时间、证书序列号等，这些信息都是明文的，同时包含一个 CA 生成的签名。

> _申请和使用数字证书注意三点_

1. 申请数字证书是不需要提供私钥的，要确保私钥永远只能由服务器掌握；

2. 数字证书最核心的是 CA 使用它的私钥生成的数字签名；

3. 内置 CA 对应的证书称为根证书，根证书是最权威的机构，它们自己为自己签名，我们把这称为自签名证书。

> 数字签名过程：首先 CA 使用 Hash 函数来计算网站提交的明文信息，并得出信息摘要；然后 CA 再使用它的私钥对信息摘要进行加密，加密后的密文就是 CA 颁给网站的数字签名。这就相当于房管局在房产证上盖的章，这个章是可以去验证的，同样我们也可以通过数字签名来验证是否是该 CA 颁发的。
