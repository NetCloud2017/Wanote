# JavaScript 数据存储

JavaScript 是弱类型的动态语言，它一共有 8 种数据类型分别是:

<img src="./img/10jsDataType.png" />

而这 8 种类又可以分成<b style="color: #aaffaa" > 原始类型 </b> 和 <b style="color: #aaffaa" >引用类型</b> 两大类。在 JavaScript 运行过程中有三种内存空间， 即代码空间、 栈空间和堆空间。

- **代码空间**： 用于存放运行的代码；

- **栈空间**： 用于存放原始类型数据以及引用类型数据的引用地址;

- **堆空间**： 用于存放引用类型数据；

<img src="./img/10jsDataStorage.png" />

<h2 style='color: #aaffaa'> 垃圾数据回收</h2>

<b style="color: #aaffaa; font-size: 16px" >栈内存清理</b>

JavaScript 语言和其他语言不同， JavaScript 的垃圾数据是由垃圾回收器自动回收的。当执行一段 JavaScript 代码的时候， 会为其创建执行上下文，执行上下文李包含着变量环境和词法环境，变量环境存放着 var 声明和函数声明的变量的原始数据和引用地址， 而词法环境存放着 let 和 const 声明的原始数据和引用地址， 并压入调用栈中，<div style="color:#aaffaa"> 因此原始数据，以及对象类型的引用地址都随着执行上下文存放在栈中。</div>

与此同时， 还会有一个**记录当前执行状态的指针（ESP)** 指向改执行上下文。当对应这个执行上下文的可执行代码执行完之后， 这个执行上下文就会出栈。 这时栈中的数据也自动被回收了，随后 ESP 则指向下一个执行上下文。

```js
function foo() {
	var a = 1;
	var b = { name: "极客邦" };
	function showName() {
		var c = "极客时间";
		var d = { name: "极客时间" };
	}
	showName();
}
foo();
```

<img src="./img/10jsDataRetrieve.png" />

<b style="color: #aaffaa; font-size: 16px" >堆内存清理</b>

对于对象类型数据，清理栈内存的时候， 只是清理了栈内存中引用数据地址的引用。并没有清理到堆内存里的数据。那 JavaScript 是怎么清理堆内存里的数据的呢？

在 V8 引擎中会把堆内存分为新生代和老生代两个区域，新生代中存放的是生存时间短的对象，老生代中存放的生存时间久的对象。 新生代内存通常只有 1 - 8 Mb 而老生代却很大一般几百 Mb 到 1 点几 Gb 不等。因此， 老生代使用针对这种情况 V8 引擎采用了副垃圾回收器和主垃圾回收器分别对这俩个区域进行垃圾数据回收。

什么是静态语言和动态语言？

在声明变量之前需要先定义变量类型。我们把这种在使用之前就需要确认其变量数据类型的称为静态语言。相反地，我们把在运行过程中需要检查数据类型的语言称为动态语言。

什么是强类型语言和强类型语言？

们通常把这种偷偷转换的操作称为隐式类型转换。而支持隐式类型转换的语言称为弱类型语言，不支持隐式类型转换的语言称为强类型语言。

<img src="./img/10language.png" />
